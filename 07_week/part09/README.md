# 프로토타입 개념

## 프로토타입

자바스크립트는 프로토타입 기반 언어입니다. 클래스 기반 언어에서는 *상속*을 사용하지만 프로토타입 기반 언어에서는 어떤 객체를 원형(prototype)으로 삼고 이를 복제(참조)함으로써 상속과 비슷한 효과를 얻습니다. 유명한 프로그래밍 언어의 상당수가 클래스 기반인 것에 비교하면 프로토타입은 꽤나 독특한 개념이라 할 수 있습니다.

## 프로토타입의 개념 이해

```javascript
var instance = new Constructor();
```

위 코드의 흐름을 살펴보겠습니다.

1. 어떤 생성자 함수(Constructor)를 new 연산자와 함께 호출하면

2. Constructor에서 정의된 내용을 바탕으로 새로운 인스턴스(instance)가 생성됩니다.

3. 이때 instance에는 __proto__라는 프로퍼티가 자동으로 부여되는데

4. 이 프로퍼티는 Constructor의 prototype이라는 프로퍼티를 참조합니다.

prototype이라는 프로퍼티와 \_\_proto\_\_라는 프로퍼티가 새로 등장했네요. 이 둘의 관계가 프로토타입 개념의 핵심이라고 할 수 있습니다. 

prototype은 객체이며 이를 참조하는 \_\_proto\_\_ 역시 당연히 객체입니다. prototype 객체 내부에는 인스턴스가 사용할 메서드를 저장합니다. 그러면 인스턴스에서도 숨겨진 프로퍼티인 \_\_proto\_\_를 통해 이 메서드들에 접근할 수 있게됩니다.

ES5.1 명세에는 \_\_proto\_\_가 아니라  [[prototype]] 이라는 명칭으로 정의돼 있습니다. \_\_proto\_\_라는 프로퍼티는 사실 브라우저들이 [[prototype]]을 구현한 대상에 지나지 않습니다.
명세에는 또 instance.\_\_proto\_\_와 같은 방식으로 직접 접근하는 것은 허용하지 않고 오직 Object.getPrototypeOf(instance) / Refelect.getPrototypeOf(instance)를 통해서만 접근할 수 있도록 정의했었는데요. 그러나 이런 명세에도 불구하고 대부분의 브라우저들이 \_\_proto\_\_에 직접 접근하는 방식을 포기하지 않았습니다. 결국 ES6에서는 이를 브라우저에서 동작하는 레거시 코드에 대한 호환성 유지 차원에서 정식으로 인정하기에 이르렀습니다. 다만, 어디까지나 브라우저에서의 호환성을 고려한 지원일 뿐 권장되는 방식은 아니며, 브라우저가 아닌 다른 환경에서는 얼마든지 이 방식이 지원되지 않을 가능성이 있습니다. 